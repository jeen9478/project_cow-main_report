{% extends "base.html" %}
{% block content %}
<div class="container">
  <h3 class="mb-4">üìë ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ß</h3>

  <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà -->
  <form method="post" class="row g-3 mb-4">
    <div class="col-auto">
      <label>‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
      <input type="date" name="start_date" value="{{ start_date or '' }}" class="form-control">
    </div>
    <div class="col-auto">
      <label>‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
      <input type="date" name="end_date" value="{{ end_date or '' }}" class="form-control">
    </div>
    <div class="col-auto align-self-end">
      <button type="submit" class="btn btn-primary">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
    </div>
  </form>

  <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
  <table class="table table-bordered table-striped align-middle">
    <thead class="table-success">
      <tr>
        <th>‡πÅ‡∏ó‡πá‡∏Å</th>
        <th>‡∏ä‡∏∑‡πà‡∏≠</th>
        <th>‡πÄ‡∏û‡∏®</th>
        <th>‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå</th>
        <th>‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ (¬∞C)</th>
        <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
        <th>‡πÄ‡∏ß‡∏•‡∏≤</th>
        <th>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
      </tr>
    </thead>
    <tbody>
      {% for cow in cows %}
      <tr>
        <td>{{ cow.rfid_tag or '-' }}</td>
        <td>{{ cow.name or '-' }}</td>
        <td>{{ cow.gender or '-' }}</td>
        <td>{{ cow.breed or '-' }}</td>
        <td>{{ "%.2f"|format(cow.temperature) }}</td>
        <td>
          {% if cow.status == "‡∏™‡∏π‡∏á" %}
            <span class="badge bg-danger">‡∏™‡∏π‡∏á</span>
          {% else %}
            <span class="badge bg-success">‡∏õ‡∏Å‡∏ï‡∏¥</span>
          {% endif %}
        </td>
        <td>{{ cow.timestamp }}</td>
        <td>
          {% if cow.image_path %}
            <img src="{{ url_for('static', filename=cow.image_path.split('static/')[-1]) }}" alt="‡∏£‡∏π‡∏õ‡∏ß‡∏±‡∏ß" width="100">
          {% else %}
            -
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- ‡∏™‡∏£‡∏∏‡∏õ -->
  <div class="mt-3">
    <p>üêÆ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ß‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏Å‡∏ï‡∏¥: <strong>{{ count_normal }}</strong></p>
    <p>üî• ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ß‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏π‡∏á: <strong>{{ count_high }}</strong></p>
  </div>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î -->
  <div class="mt-3">
    <a href="{{ url_for('download_xlsx') }}" class="btn btn-success">‚¨á ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Excel</a>
    <a href="{{ url_for('download_pdf') }}" class="btn btn-danger">‚¨á ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF</a>
  </div>
</div>
{% endblock %}
